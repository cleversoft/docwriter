doctype html
html(ng-app="app")
    head
        meta(charset="utf-8")
        meta(http-equiv="Content-type", content="text/html;charset=UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")
        title(ng-bind-template="{{ pageTitle || 'Template manager' }}")
        link(rel="icon", type="image/x-icon", href="/favicon.ico")

        link(rel="stylesheet", href="/bower_components/codemirror/lib/codemirror.css")
        link(rel="stylesheet", href="/bower_components/bootstrap/dist/css/bootstrap.min.css")
        link(rel="stylesheet", href="/bower_components/fontawesome/css/font-awesome.min.css")
        link(rel="stylesheet", href="http://fonts.googleapis.com/css?family=Noto+Sans:400,700")

        link(rel="stylesheet", href="/css/backend.css")

        | <!--[if lt IE 9]>
        | <script src="/bower_components/html5shiv/dist/html5shiv.min.js"></script>
        | <script src="/bower_components/respond/dest/respond.min.js"></script>
        | <![endif]-->
    body(ng-controller="AppCtrl", ng-class="{ 'dw-body': currentUser }")
        div(ng-if="!loadingDone")
            .container
                .col-md-4.col-md-offset-4
                    .dw-loading
                        .progress.progress-striped.active
                            .progress-bar(style="width: 100%;")

        div(ng-if="loadingDone")
            header.dw-header(ng-show="currentUser")
                a.dw-logo(href="/admin")

                nav.navbar.navbar-default.navbar-static-top(role="navigation")
                    a.dw-toggle(href="javascript: void(0);")
                        i.fa.fa-bars

                    ul.nav.navbar-right
                        li.dropdown
                            a.dropdown-toggle(href="javascript: void(0);", data-toggle="dropdown")
                                i.fa.fa-user
                                span {{ currentUser.username }}
                                i.fa.fa-caret-down
                            ul.dropdown-menu
                                li
                                    a(href="/admin/user/password") Change password
                                li.divider
                                li
                                    a(href="javascript: void(0);", ng-click="signout()") Signout

            .dw-wrapper(ng-show="currentUser")
                div.dw-sidebar
                    ul.nav
                        li
                            a(href="/admin", title="Dashboard")
                                span.fa-stack.fa-lg
                                    i.fa.fa-circle.fa-stack-2x
                                    i.fa.fa-dashboard.fa-stack-1x.fa-inverse
                                |  Dashboard
                        li
                            a(href="/admin/category", title="Categories")
                                span.fa-stack.fa-lg
                                    i.fa.fa-circle.fa-stack-2x
                                    i.fa.fa-tags.fa-stack-1x.fa-inverse
                                |  Categories
                        li
                            a(href="/admin/post", title="Posts")
                                span.fa-stack.fa-lg
                                    i.fa.fa-circle.fa-stack-2x
                                    i.fa.fa-edit.fa-stack-1x.fa-inverse
                                |  Posts
                        li
                            a(href="/admin/user", title="Users")
                                span.fa-stack.fa-lg
                                    i.fa.fa-circle.fa-stack-2x
                                    i.fa.fa-users.fa-stack-1x.fa-inverse
                                |  Users

                aside.dw-content
                    div(ng-view)

            .dw-notification
                div(growl-notifications)

            div(login-modal)

        script(src="/bower_components/jquery/dist/jquery.min.js")
        script(src="/bower_components/codemirror/lib/codemirror.js")
        script(src="/bower_components/codemirror/mode/markdown/markdown.js")

        script(src="/bower_components/angular/angular.js")
        script(src="/bower_components/angular-route/angular-route.min.js")
        script(src="/bower_components/angular-sanitize/angular-sanitize.min.js")

        script(src="/bower_components/angular-growl-notifications/dist/growl-notifications.min.js")
        script(src="/bower_components/angular-ui-bootstrap-bower/ui-bootstrap-tpls.min.js")
        script(src="/bower_components/angular-ui-codemirror/ui-codemirror.min.js")

        script(src="/bower_components/lodash/dist/lodash.min.js")
        script(src="/bower_components/marked/lib/marked.js")
        script(src="/bower_components/moment/min/moment.min.js")
        script(src="/bower_components/angular-moment/angular-moment.min.js")
        script(src="/bower_components/ng-file-upload/angular-file-upload.min.js")

        script(src="/dist/js/backend.js")